{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":7,"column":15,"index":102}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"@react-native-async-storage/async-storage","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":8,"column":0,"index":103},"end":{"line":8,"column":69,"index":172}}],"key":"0kSRlooyBOaYM9tlTtK91nq+uds=","exportNames":["*"],"imports":1}},{"name":"@react-native-community/netinfo","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":173},"end":{"line":9,"column":54,"index":227}}],"key":"PqZcYTlMIVnzFjdViPzMiGUu7Hg=","exportNames":["*"],"imports":1}},{"name":"../api/inspector","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":228},"end":{"line":10,"column":71,"index":299}}],"key":"hXkUgtl2ZlL9RLsQw35xpd7L9gw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n  function _interopDefault(e) {\n    return e && e.__esModule ? e : {\n      default: e\n    };\n  }\n  Object.defineProperty(exports, \"OfflineQueueProvider\", {\n    enumerable: true,\n    get: function () {\n      return OfflineQueueProvider;\n    }\n  });\n  Object.defineProperty(exports, \"useOfflineQueue\", {\n    enumerable: true,\n    get: function () {\n      return useOfflineQueue;\n    }\n  });\n  var _react = require(_dependencyMap[0], \"react\");\n  var React = _interopDefault(_react);\n  var _reactNativeAsyncStorageAsyncStorage = require(_dependencyMap[1], \"@react-native-async-storage/async-storage\");\n  var AsyncStorage = _interopDefault(_reactNativeAsyncStorageAsyncStorage);\n  var _reactNativeCommunityNetinfo = require(_dependencyMap[2], \"@react-native-community/netinfo\");\n  var NetInfo = _interopDefault(_reactNativeCommunityNetinfo);\n  var _apiInspector = require(_dependencyMap[3], \"../api/inspector\");\n  const STORAGE_KEY = \"meatsafe_offline_seizures\";\n  const OfflineQueueContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n  const OfflineQueueProvider = ({\n    children\n  }) => {\n    const [items, setItems] = (0, _react.useState)([]);\n    const [isOnline, setIsOnline] = (0, _react.useState)(true);\n    const persist = (0, _react.useCallback)(async next => {\n      try {\n        await AsyncStorage.default.setItem(STORAGE_KEY, JSON.stringify(next));\n      } catch {\n        // ignore for MVP\n      }\n    }, []);\n    const loadFromStorage = (0, _react.useCallback)(async () => {\n      try {\n        const stored = await AsyncStorage.default.getItem(STORAGE_KEY);\n        if (stored) {\n          const parsed = JSON.parse(stored);\n          setItems(parsed);\n        }\n      } catch {\n        // ignore for MVP\n      }\n    }, []);\n    (0, _react.useEffect)(() => {\n      void loadFromStorage();\n    }, [loadFromStorage]);\n    const addPending = (0, _react.useCallback)(payload => {\n      const localId = `local-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n      const newItem = {\n        localId,\n        payload,\n        status: \"pending\"\n      };\n      setItems(prev => {\n        const next = [...prev, newItem];\n        void persist(next);\n        return next;\n      });\n    }, [persist]);\n    const markSynced = (0, _react.useCallback)(localId => {\n      setItems(prev => {\n        const next = prev.filter(i => i.localId !== localId);\n        void persist(next);\n        return next;\n      });\n    }, [persist]);\n    const markFailed = (0, _react.useCallback)((localId, error) => {\n      setItems(prev => {\n        const next = prev.map(i => i.localId === localId ? {\n          ...i,\n          status: \"failed\",\n          error\n        } : i);\n        void persist(next);\n        return next;\n      });\n    }, [persist]);\n    const syncAll = (0, _react.useCallback)(async () => {\n      const currentItems = [...items];\n      for (const item of currentItems) {\n        if (item.status !== \"pending\") continue;\n        try {\n          await (0, _apiInspector.createSeizure)(item.payload);\n          markSynced(item.localId);\n        } catch {\n          markFailed(item.localId, \"Erreur de synchronisation\");\n        }\n      }\n    }, [items, markFailed, markSynced]);\n    (0, _react.useEffect)(() => {\n      const unsubscribe = NetInfo.default.addEventListener(state => {\n        const online = !!state.isConnected && !!state.isInternetReachable;\n        setIsOnline(online);\n        if (online) {\n          void syncAll();\n        }\n      });\n      return unsubscribe;\n    }, [syncAll]);\n    const value = {\n      items,\n      isOnline,\n      addPending,\n      markSynced,\n      markFailed,\n      loadFromStorage,\n      syncAll\n    };\n    return /*#__PURE__*/React.default.createElement(OfflineQueueContext.Provider, {\n      value\n    }, children);\n  };\n  const useOfflineQueue = () => {\n    const ctx = (0, _react.useContext)(OfflineQueueContext);\n    if (!ctx) {\n      throw new Error(\"useOfflineQueue doit être utilisé dans un OfflineQueueProvider\");\n    }\n    return ctx;\n  };\n});","lineCount":132,"map":[[12,2,37,0,"Object"],[12,8,37,0],[12,9,37,0,"defineProperty"],[12,23,37,0],[12,24,37,0,"exports"],[12,31,37,0],[13,4,37,0,"enumerable"],[13,14,37,0],[14,4,37,0,"get"],[14,7,37,0],[14,18,37,0,"get"],[14,19,37,0],[15,6,37,0],[15,13,37,0,"OfflineQueueProvider"],[15,33,37,0],[16,4,37,0],[17,2,37,0],[18,2,151,0,"Object"],[18,8,151,0],[18,9,151,0,"defineProperty"],[18,23,151,0],[18,24,151,0,"exports"],[18,31,151,0],[19,4,151,0,"enumerable"],[19,14,151,0],[20,4,151,0,"get"],[20,7,151,0],[20,18,151,0,"get"],[20,19,151,0],[21,6,151,0],[21,13,151,0,"useOfflineQueue"],[21,28,151,0],[22,4,151,0],[23,2,151,0],[24,2,1,0],[24,6,1,0,"_react"],[24,12,1,0],[24,15,1,0,"require"],[24,22,1,0],[24,23,1,0,"_dependencyMap"],[24,37,1,0],[25,2,1,0],[25,6,1,0,"React"],[25,11,1,0],[25,14,1,0,"_interopDefault"],[25,29,1,0],[25,30,1,0,"_react"],[25,36,1,0],[26,2,8,0],[26,6,8,0,"_reactNativeAsyncStorageAsyncStorage"],[26,42,8,0],[26,45,8,0,"require"],[26,52,8,0],[26,53,8,0,"_dependencyMap"],[26,67,8,0],[27,2,8,0],[27,6,8,0,"AsyncStorage"],[27,18,8,0],[27,21,8,0,"_interopDefault"],[27,36,8,0],[27,37,8,0,"_reactNativeAsyncStorageAsyncStorage"],[27,73,8,0],[28,2,9,0],[28,6,9,0,"_reactNativeCommunityNetinfo"],[28,34,9,0],[28,37,9,0,"require"],[28,44,9,0],[28,45,9,0,"_dependencyMap"],[28,59,9,0],[29,2,9,0],[29,6,9,0,"NetInfo"],[29,13,9,0],[29,16,9,0,"_interopDefault"],[29,31,9,0],[29,32,9,0,"_reactNativeCommunityNetinfo"],[29,60,9,0],[30,2,10,0],[30,6,10,0,"_apiInspector"],[30,19,10,0],[30,22,10,0,"require"],[30,29,10,0],[30,30,10,0,"_dependencyMap"],[30,44,10,0],[31,2,31,0],[31,8,31,6,"STORAGE_KEY"],[31,19,31,17],[31,22,31,20],[31,49,31,47],[32,2,33,0],[32,8,33,6,"OfflineQueueContext"],[32,27,33,25],[32,43,33,28],[32,47,33,28,"createContext"],[32,53,33,41],[32,54,33,41,"createContext"],[32,67,33,41],[32,69,34,2,"undefined"],[32,78,35,0],[32,79,35,1],[33,2,37,7],[33,8,37,13,"OfflineQueueProvider"],[33,28,37,74],[33,31,37,77,"OfflineQueueProvider"],[33,32,37,78],[34,4,38,2,"children"],[35,2,39,0],[35,3,39,1],[35,8,39,6],[36,4,40,2],[36,10,40,8],[36,11,40,9,"items"],[36,16,40,14],[36,18,40,16,"setItems"],[36,26,40,24],[36,27,40,25],[36,30,40,28],[36,34,40,28,"useState"],[36,40,40,36],[36,41,40,36,"useState"],[36,49,40,36],[36,51,40,55],[36,53,40,57],[36,54,40,58],[37,4,41,2],[37,10,41,8],[37,11,41,9,"isOnline"],[37,19,41,17],[37,21,41,19,"setIsOnline"],[37,32,41,30],[37,33,41,31],[37,36,41,34],[37,40,41,34,"useState"],[37,46,41,42],[37,47,41,42,"useState"],[37,55,41,42],[37,57,41,43],[37,61,41,47],[37,62,41,48],[38,4,43,2],[38,10,43,8,"persist"],[38,17,43,15],[38,20,43,18],[38,24,43,18,"useCallback"],[38,30,43,29],[38,31,43,29,"useCallback"],[38,42,43,29],[38,44,43,30],[38,50,43,37,"next"],[38,54,43,59],[38,58,43,64],[39,6,44,4],[39,10,44,8],[40,8,45,6],[40,14,45,12,"AsyncStorage"],[40,26,45,24],[40,27,45,24,"default"],[40,34,45,24],[40,35,45,25,"setItem"],[40,42,45,32],[40,43,45,33,"STORAGE_KEY"],[40,54,45,44],[40,56,45,46,"JSON"],[40,60,45,50],[40,61,45,51,"stringify"],[40,70,45,60],[40,71,45,61,"next"],[40,75,45,65],[40,76,45,66],[40,77,45,67],[41,6,46,4],[41,7,46,5],[41,8,46,6],[41,14,46,12],[42,8,47,6],[43,6,47,6],[44,4,49,2],[44,5,49,3],[44,7,49,5],[44,9,49,7],[44,10,49,8],[45,4,51,2],[45,10,51,8,"loadFromStorage"],[45,25,51,23],[45,28,51,26],[45,32,51,26,"useCallback"],[45,38,51,37],[45,39,51,37,"useCallback"],[45,50,51,37],[45,52,51,38],[45,64,51,50],[46,6,52,4],[46,10,52,8],[47,8,53,6],[47,14,53,12,"stored"],[47,20,53,18],[47,23,53,21],[47,29,53,27,"AsyncStorage"],[47,41,53,39],[47,42,53,39,"default"],[47,49,53,39],[47,50,53,40,"getItem"],[47,57,53,47],[47,58,53,48,"STORAGE_KEY"],[47,69,53,59],[47,70,53,60],[48,8,54,6],[48,12,54,10,"stored"],[48,18,54,16],[48,20,54,18],[49,10,55,8],[49,16,55,14,"parsed"],[49,22,55,38],[49,25,55,41,"JSON"],[49,29,55,45],[49,30,55,46,"parse"],[49,35,55,51],[49,36,55,52,"stored"],[49,42,55,58],[49,43,55,59],[50,10,56,8,"setItems"],[50,18,56,16],[50,19,56,17,"parsed"],[50,25,56,23],[50,26,56,24],[51,8,57,6],[52,6,58,4],[52,7,58,5],[52,8,58,6],[52,14,58,12],[53,8,59,6],[54,6,59,6],[55,4,61,2],[55,5,61,3],[55,7,61,5],[55,9,61,7],[55,10,61,8],[56,4,63,2],[56,8,63,2,"useEffect"],[56,14,63,11],[56,15,63,11,"useEffect"],[56,24,63,11],[56,26,63,12],[56,32,63,18],[57,6,64,4],[57,11,64,9,"loadFromStorage"],[57,26,64,24],[57,27,64,25],[57,28,64,26],[58,4,65,2],[58,5,65,3],[58,7,65,5],[58,8,65,6,"loadFromStorage"],[58,23,65,21],[58,24,65,22],[58,25,65,23],[59,4,67,2],[59,10,67,8,"addPending"],[59,20,67,18],[59,23,67,21],[59,27,67,21,"useCallback"],[59,33,67,32],[59,34,67,32,"useCallback"],[59,45,67,32],[59,47,68,5,"payload"],[59,54,68,34],[59,58,68,39],[60,6,69,6],[60,12,69,12,"localId"],[60,19,69,19],[60,22,69,22],[60,31,69,31,"Date"],[60,35,69,35],[60,36,69,36,"now"],[60,39,69,39],[60,40,69,40],[60,41,69,41],[60,45,69,45,"Math"],[60,49,69,49],[60,50,69,50,"random"],[60,56,69,56],[60,57,69,57],[60,58,69,58],[60,59,70,9,"toString"],[60,67,70,17],[60,68,70,18],[60,70,70,20],[60,71,70,21],[60,72,71,9,"slice"],[60,77,71,14],[60,78,71,15],[60,79,71,16],[60,81,71,18],[60,82,71,19],[60,83,71,20],[60,85,71,22],[61,6,72,6],[61,12,72,12,"newItem"],[61,19,72,35],[61,22,72,38],[62,8,73,8,"localId"],[62,15,73,15],[63,8,74,8,"payload"],[63,15,74,15],[64,8,75,8,"status"],[64,14,75,14],[64,16,75,16],[65,6,76,6],[65,7,76,7],[66,6,77,6,"setItems"],[66,14,77,14],[66,15,77,16,"prev"],[66,19,77,20],[66,23,77,25],[67,8,78,8],[67,14,78,14,"next"],[67,18,78,18],[67,21,78,21],[67,22,78,22],[67,25,78,25,"prev"],[67,29,78,29],[67,31,78,31,"newItem"],[67,38,78,38],[67,39,78,39],[68,8,79,8],[68,13,79,13,"persist"],[68,20,79,20],[68,21,79,21,"next"],[68,25,79,25],[68,26,79,26],[69,8,80,8],[69,15,80,15,"next"],[69,19,80,19],[70,6,81,6],[70,7,81,7],[70,8,81,8],[71,4,82,4],[71,5,82,5],[71,7,83,4],[71,8,83,5,"persist"],[71,15,83,12],[71,16,84,2],[71,17,84,3],[72,4,86,2],[72,10,86,8,"markSynced"],[72,20,86,18],[72,23,86,21],[72,27,86,21,"useCallback"],[72,33,86,32],[72,34,86,32,"useCallback"],[72,45,86,32],[72,47,87,5,"localId"],[72,54,87,20],[72,58,87,25],[73,6,88,6,"setItems"],[73,14,88,14],[73,15,88,16,"prev"],[73,19,88,20],[73,23,88,25],[74,8,89,8],[74,14,89,14,"next"],[74,18,89,18],[74,21,89,21,"prev"],[74,25,89,25],[74,26,89,26,"filter"],[74,32,89,32],[74,33,89,34,"i"],[74,34,89,35],[74,38,89,40,"i"],[74,39,89,41],[74,40,89,42,"localId"],[74,47,89,49],[74,52,89,54,"localId"],[74,59,89,61],[74,60,89,62],[75,8,90,8],[75,13,90,13,"persist"],[75,20,90,20],[75,21,90,21,"next"],[75,25,90,25],[75,26,90,26],[76,8,91,8],[76,15,91,15,"next"],[76,19,91,19],[77,6,92,6],[77,7,92,7],[77,8,92,8],[78,4,93,4],[78,5,93,5],[78,7,94,4],[78,8,94,5,"persist"],[78,15,94,12],[78,16,95,2],[78,17,95,3],[79,4,97,2],[79,10,97,8,"markFailed"],[79,20,97,18],[79,23,97,21],[79,27,97,21,"useCallback"],[79,33,97,32],[79,34,97,32,"useCallback"],[79,45,97,32],[79,47,98,4],[79,48,98,5,"localId"],[79,55,98,20],[79,57,98,22,"error"],[79,62,98,36],[79,67,98,41],[80,6,99,6,"setItems"],[80,14,99,14],[80,15,99,16,"prev"],[80,19,99,20],[80,23,99,25],[81,8,100,8],[81,14,100,14,"next"],[81,18,100,18],[81,21,100,21,"prev"],[81,25,100,25],[81,26,100,26,"map"],[81,29,100,29],[81,30,100,31,"i"],[81,31,100,32],[81,35,101,10,"i"],[81,36,101,11],[81,37,101,12,"localId"],[81,44,101,19],[81,49,101,24,"localId"],[81,56,101,31],[81,59,101,34],[82,10,101,36],[82,13,101,39,"i"],[82,14,101,40],[83,10,101,42,"status"],[83,16,101,48],[83,18,101,50],[83,26,101,58],[84,10,101,60,"error"],[85,8,101,66],[85,9,101,67],[85,12,101,70,"i"],[85,13,102,8],[85,14,102,9],[86,8,103,8],[86,13,103,13,"persist"],[86,20,103,20],[86,21,103,21,"next"],[86,25,103,25],[86,26,103,26],[87,8,104,8],[87,15,104,15,"next"],[87,19,104,19],[88,6,105,6],[88,7,105,7],[88,8,105,8],[89,4,106,4],[89,5,106,5],[89,7,107,4],[89,8,107,5,"persist"],[89,15,107,12],[89,16,108,2],[89,17,108,3],[90,4,110,2],[90,10,110,8,"syncAll"],[90,17,110,15],[90,20,110,18],[90,24,110,18,"useCallback"],[90,30,110,29],[90,31,110,29,"useCallback"],[90,42,110,29],[90,44,110,30],[90,56,110,42],[91,6,111,4],[91,12,111,10,"currentItems"],[91,24,111,22],[91,27,111,25],[91,28,111,26],[91,31,111,29,"items"],[91,36,111,34],[91,37,111,35],[92,6,112,4],[92,11,112,9],[92,17,112,15,"item"],[92,21,112,19],[92,25,112,23,"currentItems"],[92,37,112,35],[92,39,112,37],[93,8,113,6],[93,12,113,10,"item"],[93,16,113,14],[93,17,113,15,"status"],[93,23,113,21],[93,28,113,26],[93,37,113,35],[93,39,113,37],[94,8,114,6],[94,12,114,10],[95,10,115,8],[95,16,115,14],[95,20,115,14,"createSeizure"],[95,33,115,27],[95,34,115,27,"createSeizure"],[95,47,115,27],[95,49,115,28,"item"],[95,53,115,32],[95,54,115,33,"payload"],[95,61,115,40],[95,62,115,41],[96,10,116,8,"markSynced"],[96,20,116,18],[96,21,116,19,"item"],[96,25,116,23],[96,26,116,24,"localId"],[96,33,116,31],[96,34,116,32],[97,8,117,6],[97,9,117,7],[97,10,117,8],[97,16,117,14],[98,10,118,8,"markFailed"],[98,20,118,18],[98,21,118,19,"item"],[98,25,118,23],[98,26,118,24,"localId"],[98,33,118,31],[98,35,118,33],[98,62,118,60],[98,63,118,61],[99,8,119,6],[100,6,120,4],[101,4,121,2],[101,5,121,3],[101,7,121,5],[101,8,121,6,"items"],[101,13,121,11],[101,15,121,13,"markFailed"],[101,25,121,23],[101,27,121,25,"markSynced"],[101,37,121,35],[101,38,121,36],[101,39,121,37],[102,4,123,2],[102,8,123,2,"useEffect"],[102,14,123,11],[102,15,123,11,"useEffect"],[102,24,123,11],[102,26,123,12],[102,32,123,18],[103,6,124,4],[103,12,124,10,"unsubscribe"],[103,23,124,21],[103,26,124,24,"NetInfo"],[103,33,124,31],[103,34,124,31,"default"],[103,41,124,31],[103,42,124,32,"addEventListener"],[103,58,124,48],[103,59,124,50,"state"],[103,64,124,55],[103,68,124,60],[104,8,125,6],[104,14,125,12,"online"],[104,20,125,18],[104,23,125,21],[104,24,125,22],[104,25,125,23,"state"],[104,30,125,28],[104,31,125,29,"isConnected"],[104,42,125,40],[104,46,125,44],[104,47,125,45],[104,48,125,46,"state"],[104,53,125,51],[104,54,125,52,"isInternetReachable"],[104,73,125,71],[105,8,126,6,"setIsOnline"],[105,19,126,17],[105,20,126,18,"online"],[105,26,126,24],[105,27,126,25],[106,8,127,6],[106,12,127,10,"online"],[106,18,127,16],[106,20,127,18],[107,10,128,8],[107,15,128,13,"syncAll"],[107,22,128,20],[107,23,128,21],[107,24,128,22],[108,8,129,6],[109,6,130,4],[109,7,130,5],[109,8,130,6],[110,6,131,4],[110,13,131,11,"unsubscribe"],[110,24,131,22],[111,4,132,2],[111,5,132,3],[111,7,132,5],[111,8,132,6,"syncAll"],[111,15,132,13],[111,16,132,14],[111,17,132,15],[112,4,134,2],[112,10,134,8,"value"],[112,15,134,39],[112,18,134,42],[113,6,135,4,"items"],[113,11,135,9],[114,6,136,4,"isOnline"],[114,14,136,12],[115,6,137,4,"addPending"],[115,16,137,14],[116,6,138,4,"markSynced"],[116,16,138,14],[117,6,139,4,"markFailed"],[117,16,139,14],[118,6,140,4,"loadFromStorage"],[118,21,140,19],[119,6,141,4,"syncAll"],[120,4,142,2],[120,5,142,3],[121,4,144,2],[121,24,144,9,"React"],[121,29,144,14],[121,30,144,14,"default"],[121,37,144,14],[121,38,144,15,"createElement"],[121,51,144,28],[121,52,145,4,"OfflineQueueContext"],[121,71,145,23],[121,72,145,24,"Provider"],[121,80,145,32],[121,82,146,4],[122,6,146,6,"value"],[123,4,146,12],[123,5,146,13],[123,7,147,4,"children"],[123,15,148,2],[123,16,148,3],[124,2,149,0],[124,3,149,1],[125,2,151,7],[125,8,151,13,"useOfflineQueue"],[125,23,151,28],[125,26,151,31,"useOfflineQueue"],[125,27,151,31],[125,32,151,63],[126,4,152,2],[126,10,152,8,"ctx"],[126,13,152,11],[126,16,152,14],[126,20,152,14,"useContext"],[126,26,152,24],[126,27,152,24,"useContext"],[126,37,152,24],[126,39,152,25,"OfflineQueueContext"],[126,58,152,44],[126,59,152,45],[127,4,153,2],[127,8,153,6],[127,9,153,7,"ctx"],[127,12,153,10],[127,14,153,12],[128,6,154,4],[128,12,154,10],[128,16,154,14,"Error"],[128,21,154,19],[128,22,154,20],[128,86,154,84],[128,87,154,85],[129,4,155,2],[130,4,156,2],[130,11,156,9,"ctx"],[130,14,156,12],[131,2,157,0],[131,3,157,1],[132,0,157,2],[132,3]],"functionMap":{"names":["<global>","OfflineQueueProvider","persist","loadFromStorage","useEffect$argument_0","addPending","setItems$argument_0","markSynced","prev.filter$argument_0","markFailed","prev.map$argument_0","syncAll","NetInfo.addEventListener$argument_0","useOfflineQueue"],"mappings":"AAA;6ECoC;8BCM;GDM;sCEE;GFU;YGE;GHE;IIG;eCS;ODI;KJC;IMK;eDC;iCEC,4BF;OCG;KNC;IQK;eHC;8BIC;uEJC;OGI;KRC;8BUI;GVW;YGE;iDQC;KRM;GHE;CDiB;+BaE;CbM"},"hasCjsExports":false},"type":"js/module"}]}